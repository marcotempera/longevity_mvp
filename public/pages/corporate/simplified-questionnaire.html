<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Questionario semplificato</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    :root{
      --bg:#0b0f14;
      --card:#111823;
      --muted:#94a3b8;
      --primary:#7c4dff;
      --accent:#36d1dc;
      --success:#22c55e;
    }
    body{
      background:radial-gradient(1000px 600px at 80% -10%, #0f1d2e, var(--bg) 60%);
      color:#eaf6ff;
      font-family:Poppins,sans-serif;
      margin:0;
      padding:0;
    }
    .wrap{max-width:1100px;margin:40px auto;padding:0 20px 60px}
    .card{
      background:rgba(255,255,255,0.06);
      border:1px solid #1a324a;
      border-radius:16px;
      padding:24px;
      margin-bottom:20px;
    }
    .cta{
      background:linear-gradient(90deg,var(--accent),#0077ff);
      color:#0d1624;
      border:0;
      border-radius:10px;
      padding:12px 20px;
      font-weight:600;
      cursor:pointer;
      transition:transform .2s;
    }
    .cta:hover{transform:translateY(-2px)}
    .cta.secondary{
      background:#1a324a;
      color:#eaf6ff;
    }
    .progress-bar{
      background:#1a324a;
      height:8px;
      border-radius:5px;
      margin:15px 0;
      overflow:hidden;
    }
    .progress-bar>div{
      background:linear-gradient(90deg,var(--accent),#0077ff);
      height:100%;
      width:10%;
      border-radius:5px;
      transition:width .3s;
    }
    h1,h2{font-family:'Space Grotesk',sans-serif;margin-top:0}
    h1{font-size:2rem;margin-bottom:10px}
    h2{font-size:1.4rem;margin-bottom:20px}
    .muted{color:var(--muted);font-size:.9rem}
    .field{margin:20px 0}
    .field>label{
      display:block;
      font-weight:600;
      margin-bottom:12px;
      font-size:1rem;
    }
    .hint{
      color:var(--muted);
      font-size:.85rem;
      margin:8px 0 12px;
    }
    .grid-options{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
      gap:12px;
    }
    .option-label{
      display:flex;
      align-items:center;
      gap:10px;
      padding:12px 14px;
      border:1px solid rgba(255,255,255,0.15);
      border-radius:10px;
      background:rgba(255,255,255,0.03);
      cursor:pointer;
      transition:all .2s;
    }
    .option-label:hover{
      border-color:var(--accent);
      background:rgba(54,209,220,0.1);
    }
    .option-label input{
      accent-color:var(--accent);
    }
    textarea, input[type="text"], input[type="number"], select{
      width:100%;
      padding:12px;
      border:1px solid rgba(255,255,255,0.15);
      border-radius:10px;
      background:rgba(255,255,255,0.05);
      color:#eaf6ff;
      font-family:inherit;
      font-size:.95rem;
    }
    textarea:focus, input:focus, select:focus{
      outline:none;
      border-color:var(--accent);
      box-shadow:0 0 0 3px rgba(54,209,220,0.2);
    }
    .actions{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
    }
    .error{
      background:rgba(239,68,68,0.1);
      border:1px solid #ef4444;
      color:#fca5a5;
      padding:12px;
      border-radius:10px;
      margin:16px 0;
      display:none;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Questionario semplificato</h1>
    <p class="muted">
      Compila il questionario in modo spontaneo e sincero. Le domande riguardano salute, benessere
      generale, stato psicologico e contesto di vita.
    </p>

    <div class="progress-bar">
      <div></div>
    </div>

    <form id="simplified-questionnaire">

      <!-- ISTRUZIONI -->
      <div class="card">
        <h2>üìå Istruzioni</h2>
        <p>
          Questo questionario ha lo scopo di raccogliere la tua percezione riguardo alla salute,
          al benessere generale e psicologico e ad alcuni aspetti della tua vita quotidiana.
        </p>
        <p>
          Ti invitiamo a rispondere in modo spontaneo e sincero: se sei incerto su quale opzione
          scegliere, seleziona quella che meglio rispecchia la tua situazione personale ‚Äî spesso
          la prima risposta che ti viene in mente √® anche la pi√π autentica.
        </p>
        <p>
          Nel compilare le domande, considera le tue abitudini, il tuo stile di vita, le tue
          preoccupazioni e le tue aspettative. Clicca sulla risposta che pi√π rappresenta
          il tuo punto di vista.
        </p>
      </div>

      <!-- DATI BASE -->
      <div class="card">
        <h2>üë§ Dati anagrafici</h2>

        <div class="field">
          <label for="">1. Sesso</label>
          <div class="grid-options">
            <label class="option-label">
              <input type="radio" name="sesso" value="maschio">
              <span>Maschio</span>
            </label>
            <label class="option-label">
              <input type="radio" name="sesso" value="femmina">
              <span>Femmina</span>
            </label>
            <label class="option-label">
              <input type="radio" name="sesso" value="non_specificato">
              <span>Non voglio specificarlo</span>
            </label>
          </div>
        </div>

        <div class="field">
          <label>2. Et√†</label>
          <input type="number" name="eta" min="0" max="120" placeholder="Inserisci la tua et√†">
        </div>

        <div class="field">
          <label>3. Scolarit√†</label>
          <div class="grid-options">
            <label class="option-label">
              <input type="radio" name="scolarita" value="nessun_titolo">
              <span>Nessun titolo di studio</span>
            </label>
            <label class="option-label">
              <input type="radio" name="scolarita" value="elementare">
              <span>Scuola elementare</span>
            </label>
            <label class="option-label">
              <input type="radio" name="scolarita" value="media_inferiore">
              <span>Scuola media inferiore</span>
            </label>
            <label class="option-label">
              <input type="radio" name="scolarita" value="media_superiore">
              <span>Scuola media superiore</span>
            </label>
            <label class="option-label">
              <input type="radio" name="scolarita" value="laurea">
              <span>Laurea / diploma para-universitario</span>
            </label>
            <label class="option-label">
              <input type="radio" name="scolarita" value="post_laurea">
              <span>Specializzazione post-laurea</span>
            </label>
          </div>
        </div>

        <div class="field">
          <label>4. Stato civile</label>
          <div class="grid-options">
            <label class="option-label">
              <input type="radio" name="stato_civile" value="celibe_nubile">
              <span>Celibe / Nubile</span>
            </label>
            <label class="option-label">
              <input type="radio" name="stato_civile" value="coniugato">
              <span>Coniugato/a</span>
            </label>
            <label class="option-label">
              <input type="radio" name="stato_civile" value="convivente">
              <span>Convivente</span>
            </label>
            <label class="option-label">
              <input type="radio" name="stato_civile" value="separato">
              <span>Separato/a</span>
            </label>
            <label class="option-label">
              <input type="radio" name="stato_civile" value="divorziato">
              <span>Divorziato/a</span>
            </label>
            <label class="option-label">
              <input type="radio" name="stato_civile" value="vedovo">
              <span>Vedovo/a</span>
            </label>
          </div>
        </div>

        <div class="field">
          <label>5. Situazione abitativa</label>
          <div class="grid-options">
            <label class="option-label">
              <input type="radio" name="abitazione" value="vive_solo">
              <span>Vive solo</span>
            </label>
            <label class="option-label">
              <input type="radio" name="abitazione" value="vive_con_altri">
              <span>Vive con altri</span>
            </label>
          </div>
        </div>
      </div>

      <!-- SALUTE GENERALE -->
      <div class="card">
        <h2>ü©∫ Salute generale</h2>

        <div class="field">
          <label>6. Attualmente soffri di qualche malattia o disturbo?</label>
          <div class="grid-options">
            <label class="option-label">
              <input type="radio" name="malattie" value="no">
              <span>No</span>
            </label>
            <label class="option-label">
              <input type="radio" name="malattie" value="si">
              <span>S√¨</span>
            </label>
          </div>
          <div class="hint">Se s√¨, specifica:</div>
          <input type="text" name="malattie_descrizione" placeholder="Es. diabete, ipertensione, ansia‚Ä¶">
        </div>

        <div class="field">
          <label>7. Come valuti complessivamente le tue condizioni di salute fisica?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="salute_fisica" value="molto_scadenti"><span>Molto scadenti</span></label>
            <label class="option-label"><input type="radio" name="salute_fisica" value="scadenti"><span>Scadenti</span></label>
            <label class="option-label"><input type="radio" name="salute_fisica" value="neutrale"><span>N√© scadenti n√© buone</span></label>
            <label class="option-label"><input type="radio" name="salute_fisica" value="buone"><span>Buone</span></label>
            <label class="option-label"><input type="radio" name="salute_fisica" value="molto_buone"><span>Molto buone</span></label>
          </div>
        </div>

        <div class="field">
          <label>8. Come valuti complessivamente le tue condizioni di salute psicologica?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="salute_psicologica" value="molto_scadenti"><span>Molto scadenti</span></label>
            <label class="option-label"><input type="radio" name="salute_psicologica" value="scadenti"><span>Scadenti</span></label>
            <label class="option-label"><input type="radio" name="salute_psicologica" value="neutrale"><span>N√© scadenti n√© buone</span></label>
            <label class="option-label"><input type="radio" name="salute_psicologica" value="buone"><span>Buone</span></label>
            <label class="option-label"><input type="radio" name="salute_psicologica" value="molto_buone"><span>Molto buone</span></label>
          </div>
        </div>

        <div class="field">
          <label>9. Come valuti la qualit√† complessiva della tua vita?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="qualita_vita" value="molto_cattiva"><span>Molto cattiva</span></label>
            <label class="option-label"><input type="radio" name="qualita_vita" value="cattiva"><span>Cattiva</span></label>
            <label class="option-label"><input type="radio" name="qualita_vita" value="neutrale"><span>N√© cattiva n√© buona</span></label>
            <label class="option-label"><input type="radio" name="qualita_vita" value="buona"><span>Buona</span></label>
            <label class="option-label"><input type="radio" name="qualita_vita" value="molto_buona"><span>Molto buona</span></label>
          </div>
        </div>

        <div class="field">
          <label>10. In generale diresti che la tua salute √®:</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="salute_generale" value="scadente"><span>Scadente</span></label>
            <label class="option-label"><input type="radio" name="salute_generale" value="passabile"><span>Passabile</span></label>
            <label class="option-label"><input type="radio" name="salute_generale" value="buona"><span>Buona</span></label>
            <label class="option-label"><input type="radio" name="salute_generale" value="molto_buona"><span>Molto buona</span></label>
            <label class="option-label"><input type="radio" name="salute_generale" value="eccellente"><span>Eccellente</span></label>
          </div>
        </div>

        <div class="field">
          <label>11. Rispetto a un anno fa, come giudichi la tua salute in generale?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="salute_vs_anno" value="decisamente_peggiore"><span>Decisamente peggiore</span></label>
            <label class="option-label"><input type="radio" name="salute_vs_anno" value="un_po_peggiore"><span>Un po‚Äô peggiore</span></label>
            <label class="option-label"><input type="radio" name="salute_vs_anno" value="uguale"><span>Pi√π o meno uguale</span></label>
            <label class="option-label"><input type="radio" name="salute_vs_anno" value="un_po_migliore"><span>Un po‚Äô migliore</span></label>
            <label class="option-label"><input type="radio" name="salute_vs_anno" value="decisamente_migliore"><span>Decisamente migliore</span></label>
          </div>
        </div>
      </div>

      <!-- CONDIZIONE FISICA E FUNZIONALIT√Ä -->
      <div class="card">
        <h2>üí™ Condizione fisica e funzionalit√†</h2>

        <div class="field">
          <label>12. I dolori fisici ti impediscono di svolgere le attivit√† quotidiane?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="dolore_limita_attivita" value="nessuna_limitazione"><span>No, per niente</span></label>
            <label class="option-label"><input type="radio" name="dolore_limita_attivita" value="limitano_parzialmente"><span>S√¨, mi limitano parzialmente</span></label>
            <label class="option-label"><input type="radio" name="dolore_limita_attivita" value="limitano_parecchio"><span>S√¨, mi limitano parecchio</span></label>
          </div>
        </div>

        <div class="field">
          <label>13. Hai bisogno di trattamenti o interventi medici per affrontare la vita di tutti i giorni?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="trattamenti_quotidiani" value="nessun_trattamento"><span>No</span></label>
            <label class="option-label"><input type="radio" name="trattamenti_quotidiani" value="trattamenti_in_parte"><span>In parte</span></label>
            <label class="option-label"><input type="radio" name="trattamenti_quotidiani" value="trattamenti_si"><span>S√¨</span></label>
          </div>
        </div>

        <div class="field">
          <label>14. Hai l‚Äôenergia necessaria per svolgere le attivit√† quotidiane?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="energia_quotidiana" value="per_niente"><span>Per niente</span></label>
            <label class="option-label"><input type="radio" name="energia_quotidiana" value="poco"><span>Poco</span></label>
            <label class="option-label"><input type="radio" name="energia_quotidiana" value="abbastanza"><span>Abbastanza</span></label>
            <label class="option-label"><input type="radio" name="energia_quotidiana" value="in_gran_parte"><span>In gran parte</span></label>
            <label class="option-label"><input type="radio" name="energia_quotidiana" value="completamente"><span>Completamente</span></label>
          </div>
        </div>

        <div class="field">
          <label>15. In che misura riesci a muoverti agevolmente?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="mobilita" value="molto_poco"><span>Molto poco</span></label>
            <label class="option-label"><input type="radio" name="mobilita" value="poco"><span>Poco</span></label>
            <label class="option-label"><input type="radio" name="mobilita" value="abbastanza"><span>Abbastanza</span></label>
            <label class="option-label"><input type="radio" name="mobilita" value="molto"><span>Molto</span></label>
            <label class="option-label"><input type="radio" name="mobilita" value="moltissimo"><span>Moltissimo</span></label>
          </div>
        </div>

        <div class="field">
          <label>16. La tua salute ti limita nello svolgimento di attivit√† fisicamente impegnative (correre, sollevare pesi, fare sport)?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="limiti_attivita_fisica_intensa" value="nessuna_limitazione"><span>No, per niente</span></label>
            <label class="option-label"><input type="radio" name="limiti_attivita_fisica_intensa" value="limitazione_parziale"><span>S√¨, parzialmente</span></label>
            <label class="option-label"><input type="radio" name="limiti_attivita_fisica_intensa" value="limitazione_importante"><span>S√¨, parecchio</span></label>
          </div>
        </div>

        <div class="field">
          <label>17. La tua salute ti limita in attivit√† di moderato impegno fisico (camminare, spostare oggetti, salire scale)?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="limiti_attivita_fisica_moderata" value="nessuna_limitazione"><span>No, per niente</span></label>
            <label class="option-label"><input type="radio" name="limiti_attivita_fisica_moderata" value="limitazione_parziale"><span>S√¨, parzialmente</span></label>
            <label class="option-label"><input type="radio" name="limiti_attivita_fisica_moderata" value="limitazione_importante"><span>S√¨, parecchio</span></label>
          </div>
        </div>

        <div class="field">
          <label>18. Hai difficolt√† nel vestirti o nel fare il bagno da solo/a?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="autonomia_personale" value="per_niente"><span>Per niente</span></label>
            <label class="option-label"><input type="radio" name="autonomia_personale" value="poco"><span>Poco</span></label>
            <label class="option-label"><input type="radio" name="autonomia_personale" value="abbastanza"><span>Abbastanza</span></label>
            <label class="option-label"><input type="radio" name="autonomia_personale" value="in_gran_parte"><span>In gran parte</span></label>
            <label class="option-label"><input type="radio" name="autonomia_personale" value="completamente"><span>Completamente</span></label>
          </div>
        </div>

        <div class="field">
          <label>19. Hai dovuto ridurre il tempo dedicato al lavoro o ad altre attivit√† per motivi di salute fisica?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="riduzione_tempo_lavoro" value="nessuna_riduzione"><span>No</span></label>
            <label class="option-label"><input type="radio" name="riduzione_tempo_lavoro" value="riduzione_parziale"><span>In parte</span></label>
            <label class="option-label"><input type="radio" name="riduzione_tempo_lavoro" value="riduzione_significativa"><span>S√¨</span></label>
          </div>
        </div>

        <div class="field">
          <label>20. Hai reso meno di quanto avresti voluto a causa della salute fisica?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="resa_lavorativa_salute" value="nessun_impedimento"><span>No</span></label>
            <label class="option-label"><input type="radio" name="resa_lavorativa_salute" value="impedimento_parziale"><span>In parte</span></label>
            <label class="option-label"><input type="radio" name="resa_lavorativa_salute" value="impedimento_significativo"><span>S√¨</span></label>
          </div>
        </div>

        <div class="field">
          <label>21. Hai dovuto limitare alcuni tipi di attivit√† o hai avuto difficolt√† nel lavoro per motivi fisici?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="limitazioni_attivita_fisiche" value="nessuna_limitazione"><span>No</span></label>
            <label class="option-label"><input type="radio" name="limitazioni_attivita_fisiche" value="limitazione_parziale"><span>In parte</span></label>
            <label class="option-label"><input type="radio" name="limitazioni_attivita_fisiche" value="limitazione_significativa"><span>S√¨</span></label>
          </div>
        </div>
      </div>

      <!-- STATO PSICOLOGICO ED EMOTIVO -->
      <div class="card">
        <h2>üß† Stato psicologico ed emotivo</h2>

        <div class="field">
          <label>22. Quanto ti godi la vita?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="godimento_vita" value="per_niente"><span>Per niente</span></label>
            <label class="option-label"><input type="radio" name="godimento_vita" value="poco"><span>Poco</span></label>
            <label class="option-label"><input type="radio" name="godimento_vita" value="abbastanza"><span>Abbastanza</span></label>
            <label class="option-label"><input type="radio" name="godimento_vita" value="in_gran_parte"><span>In gran parte</span></label>
            <label class="option-label"><input type="radio" name="godimento_vita" value="completamente"><span>Completamente</span></label>
          </div>
        </div>

        <div class="field">
          <label>23. La tua vita ha un significato?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="significato_vita" value="nessun_significato"><span>No</span></label>
            <label class="option-label"><input type="radio" name="significato_vita" value="significato_parziale"><span>In parte</span></label>
            <label class="option-label"><input type="radio" name="significato_vita" value="significato_si"><span>S√¨</span></label>
          </div>
        </div>

        <div class="field">
          <label>24. Riesci a concentrarti nelle attivit√† che svolgi?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="concentrazione" value="per_niente"><span>Per niente</span></label>
            <label class="option-label"><input type="radio" name="concentrazione" value="poco"><span>Poco</span></label>
            <label class="option-label"><input type="radio" name="concentrazione" value="abbastanza"><span>Abbastanza</span></label>
            <label class="option-label"><input type="radio" name="concentrazione" value="in_gran_parte"><span>In gran parte</span></label>
            <label class="option-label"><input type="radio" name="concentrazione" value="completamente"><span>Completamente</span></label>
          </div>
        </div>

        <div class="field">
          <label>25. Sei soddisfatto/a di te stesso/a?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="soddisfazione_se" value="molto_insoddisfatto"><span>Molto insoddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="soddisfazione_se" value="insoddisfatto"><span>Insoddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="soddisfazione_se" value="neutrale"><span>N√© soddisfatto/a n√© insoddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="soddisfazione_se" value="soddisfatto"><span>Soddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="soddisfazione_se" value="molto_soddisfatto"><span>Molto soddisfatto/a</span></label>
          </div>
        </div>

        <div class="field">
          <label>26. Sei soddisfatto/a della tua capacit√† di impegnarti nelle attivit√† quotidiane?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="soddisfazione_impegno" value="molto_insoddisfatto"><span>Molto insoddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="soddisfazione_impegno" value="insoddisfatto"><span>Insoddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="soddisfazione_impegno" value="neutrale"><span>N√© soddisfatto/a n√© insoddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="soddisfazione_impegno" value="soddisfatto"><span>Soddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="soddisfazione_impegno" value="molto_soddisfatto"><span>Molto soddisfatto/a</span></label>
          </div>
        </div>

        <div class="field">
          <label>27. Quanto spesso provi sentimenti negativi come tristezza, ansia o depressione?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="sentimenti_negativi" value="mai"><span>Mai</span></label>
            <label class="option-label"><input type="radio" name="sentimenti_negativi" value="raramente"><span>Raramente</span></label>
            <label class="option-label"><input type="radio" name="sentimenti_negativi" value="a_volte"><span>A volte</span></label>
            <label class="option-label"><input type="radio" name="sentimenti_negativi" value="spesso"><span>Spesso</span></label>
            <label class="option-label"><input type="radio" name="sentimenti_negativi" value="sempre"><span>Sempre</span></label>
          </div>
        </div>

        <div class="field">
          <label>28. Nelle ultime settimane, ti sei sentito/a calmo/a e sereno/a?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="calma" value="no"><span>No</span></label>
            <label class="option-label"><input type="radio" name="calma" value="in_parte"><span>In parte</span></label>
            <label class="option-label"><input type="radio" name="calma" value="si"><span>S√¨</span></label>
          </div>
        </div>

        <div class="field">
          <label>29. Ti sei sentito/a vivace e pieno/a di energia?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="energia_psicologica" value="no"><span>No</span></label>
            <label class="option-label"><input type="radio" name="energia_psicologica" value="in_parte"><span>In parte</span></label>
            <label class="option-label"><input type="radio" name="energia_psicologica" value="si"><span>S√¨</span></label>
          </div>
        </div>

        <div class="field">
          <label>30. Ti sei sentito/a agitato/a o scoraggiato/a?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="agitazione" value="no"><span>No</span></label>
            <label class="option-label"><input type="radio" name="agitazione" value="in_parte"><span>In parte</span></label>
            <label class="option-label"><input type="radio" name="agitazione" value="si"><span>S√¨</span></label>
          </div>
        </div>

        <div class="field">
          <label>31. Ti sei sentito/a stanco/a o sfinito/a?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="stanchezza" value="no"><span>No</span></label>
            <label class="option-label"><input type="radio" name="stanchezza" value="in_parte"><span>In parte</span></label>
            <label class="option-label"><input type="radio" name="stanchezza" value="si"><span>S√¨</span></label>
          </div>
        </div>

        <div class="field">
          <label>32. Ti sei sentito/a felice?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="felicita" value="no"><span>No</span></label>
            <label class="option-label"><input type="radio" name="felicita" value="in_parte"><span>In parte</span></label>
            <label class="option-label"><input type="radio" name="felicita" value="si"><span>S√¨</span></label>
          </div>
        </div>
      </div>

      <!-- RELAZIONI SOCIALI -->
      <div class="card">
        <h2>‚ù§Ô∏è Relazioni e supporto sociale</h2>

        <div class="field">
          <label>33. Sei soddisfatto/a dei tuoi rapporti personali?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="relazioni_personali" value="no"><span>No</span></label>
            <label class="option-label"><input type="radio" name="relazioni_personali" value="in_parte"><span>In parte</span></label>
            <label class="option-label"><input type="radio" name="relazioni_personali" value="si"><span>S√¨</span></label>
          </div>
        </div>

        <div class="field">
          <label>34. Ottieni dagli altri l‚Äôaiuto di cui hai bisogno?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="supporto_sociale" value="mai"><span>Mai</span></label>
            <label class="option-label"><input type="radio" name="supporto_sociale" value="raramente"><span>Raramente</span></label>
            <label class="option-label"><input type="radio" name="supporto_sociale" value="a_volte"><span>A volte</span></label>
            <label class="option-label"><input type="radio" name="supporto_sociale" value="spesso"><span>Spesso</span></label>
            <label class="option-label"><input type="radio" name="supporto_sociale" value="sempre"><span>Sempre</span></label>
          </div>
        </div>

        <div class="field">
          <label>35. Sei soddisfatto/a del sostegno che ricevi da amici o familiari?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="sostegno_famiglia" value="no"><span>No</span></label>
            <label class="option-label"><input type="radio" name="sostegno_famiglia" value="in_parte"><span>In parte</span></label>
            <label class="option-label"><input type="radio" name="sostegno_famiglia" value="si"><span>S√¨</span></label>
          </div>
        </div>

        <div class="field">
          <label>36. La salute fisica o emotiva ha interferito con le tue relazioni sociali?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="interferenza_relazioni" value="per_niente"><span>Per niente</span></label>
            <label class="option-label"><input type="radio" name="interferenza_relazioni" value="poco"><span>Poco</span></label>
            <label class="option-label"><input type="radio" name="interferenza_relazioni" value="abbastanza"><span>Abbastanza</span></label>
            <label class="option-label"><input type="radio" name="interferenza_relazioni" value="in_gran_parte"><span>In gran parte</span></label>
            <label class="option-label"><input type="radio" name="interferenza_relazioni" value="completamente"><span>Completamente</span></label>
          </div>
        </div>
      </div>

      <!-- AMBIENTE -->
      <div class="card">
        <h2>üè† Ambiente e risorse</h2>

        <div class="field">
          <label>37. Ti senti al sicuro nella tua vita quotidiana?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="sicurezza" value="no"><span>No</span></label>
            <label class="option-label"><input type="radio" name="sicurezza" value="in_parte"><span>In parte</span></label>
            <label class="option-label"><input type="radio" name="sicurezza" value="si"><span>S√¨</span></label>
          </div>
        </div>

        <div class="field">
          <label>38. L‚Äôambiente in cui vivi √® sicuro per la salute?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="ambiente_sicuro" value="no"><span>No</span></label>
            <label class="option-label"><input type="radio" name="ambiente_sicuro" value="in_parte"><span>In parte</span></label>
            <label class="option-label"><input type="radio" name="ambiente_sicuro" value="si"><span>S√¨</span></label>
          </div>
        </div>

        <div class="field">
          <label>39. Le tue risorse economiche bastano per i bisogni quotidiani?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="risorse_economiche" value="per_niente"><span>Per niente</span></label>
            <label class="option-label"><input type="radio" name="risorse_economiche" value="poco"><span>Poco</span></label>
            <label class="option-label"><input type="radio" name="risorse_economiche" value="abbastanza"><span>Abbastanza</span></label>
            <label class="option-label"><input type="radio" name="risorse_economiche" value="in_gran_parte"><span>In gran parte</span></label>
            <label class="option-label"><input type="radio" name="risorse_economiche" value="completamente"><span>Completamente</span></label>
          </div>
        </div>

        <div class="field">
          <label>40. Hai abbastanza informazioni per gestire la vita quotidiana?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="informazioni_vita" value="per_niente"><span>Per niente</span></label>
            <label class="option-label"><input type="radio" name="informazioni_vita" value="poco"><span>Poco</span></label>
            <label class="option-label"><input type="radio" name="informazioni_vita" value="abbastanza"><span>Abbastanza</span></label>
            <label class="option-label"><input type="radio" name="informazioni_vita" value="in_gran_parte"><span>In gran parte</span></label>
            <label class="option-label"><input type="radio" name="informazioni_vita" value="completamente"><span>Completamente</span></label>
          </div>
        </div>

        <div class="field">
          <label>41. Hai la possibilit√† di dedicarti ad attivit√† di svago o hobby?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="hobby" value="per_niente"><span>Per niente</span></label>
            <label class="option-label"><input type="radio" name="hobby" value="poco"><span>Poco</span></label>
            <label class="option-label"><input type="radio" name="hobby" value="abbastanza"><span>Abbastanza</span></label>
            <label class="option-label"><input type="radio" name="hobby" value="in_gran_parte"><span>In gran parte</span></label>
            <label class="option-label"><input type="radio" name="hobby" value="completamente"><span>Completamente</span></label>
          </div>
        </div>

        <div class="field">
          <label>42. Sei soddisfatto/a delle condizioni della tua abitazione?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="abitazione_condizioni" value="molto_insoddisfatto"><span>Molto insoddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="abitazione_condizioni" value="insoddisfatto"><span>Insoddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="abitazione_condizioni" value="neutrale"><span>N√© soddisfatto/a n√© insoddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="abitazione_condizioni" value="soddisfatto"><span>Soddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="abitazione_condizioni" value="molto_soddisfatto"><span>Molto soddisfatto/a</span></label>
          </div>
        </div>

        <div class="field">
          <label>43. Sei soddisfatto/a della disponibilit√† dei servizi sanitari?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="servizi_sanitari" value="molto_insoddisfatto"><span>Molto insoddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="servizi_sanitari" value="insoddisfatto"><span>Insoddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="servizi_sanitari" value="neutrale"><span>N√© soddisfatto/a n√© insoddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="servizi_sanitari" value="soddisfatto"><span>Soddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="servizi_sanitari" value="molto_soddisfatto"><span>Molto soddisfatto/a</span></label>
          </div>
        </div>

        <div class="field">
          <label>44. Sei soddisfatto/a dei mezzi di trasporto a disposizione?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="trasporti" value="molto_insoddisfatto"><span>Molto insoddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="trasporti" value="insoddisfatto"><span>Insoddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="trasporti" value="neutrale"><span>N√© soddisfatto/a n√© insoddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="trasporti" value="soddisfatto"><span>Soddisfatto/a</span></label>
            <label class="option-label"><input type="radio" name="trasporti" value="molto_soddisfatto"><span>Molto soddisfatto/a</span></label>
          </div>
        </div>
      </div>

      <!-- DOLORE + SALUTE PERCEPITA -->
      <div class="card">
        <h2>‚ö° Dolore, limitazioni e salute percepita</h2>

        <div class="field">
          <label>45. Quanto dolore fisico hai provato di recente?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="dolore_recentemente" value="per_niente"><span>Per niente</span></label>
            <label class="option-label"><input type="radio" name="dolore_recentemente" value="poco"><span>Poco</span></label>
            <label class="option-label"><input type="radio" name="dolore_recentemente" value="abbastanza"><span>Abbastanza</span></label>
            <label class="option-label"><input type="radio" name="dolore_recentemente" value="molto"><span>Molto</span></label>
            <label class="option-label"><input type="radio" name="dolore_recentemente" value="moltissimo"><span>Moltissimo</span></label>
          </div>
        </div>

        <div class="field">
          <label>46. In che misura il dolore ha limitato le tue attivit√†?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="limitazioni_dolore" value="per_niente"><span>Per niente</span></label>
            <label class="option-label"><input type="radio" name="limitazioni_dolore" value="poco"><span>Poco</span></label>
            <label class="option-label"><input type="radio" name="limitazioni_dolore" value="abbastanza"><span>Abbastanza</span></label>
            <label class="option-label"><input type="radio" name="limitazioni_dolore" value="in_gran_parte"><span>In gran parte</span></label>
            <label class="option-label"><input type="radio" name="limitazioni_dolore" value="completamente"><span>Completamente</span></label>
          </div>
        </div>

        <div class="field">
          <label>47. Ti sembra di ammalarti pi√π facilmente degli altri?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="malattie_facili" value="no"><span>No</span></label>
            <label class="option-label"><input type="radio" name="malattie_facili" value="non_sicuro"><span>Non ne sono sicuro</span></label>
            <label class="option-label"><input type="radio" name="malattie_facili" value="potrebbe_essere"><span>Potrebbe essere</span></label>
            <label class="option-label"><input type="radio" name="malattie_facili" value="assolutamente_si"><span>Assolutamente s√¨</span></label>
          </div>
        </div>

        <div class="field">
          <label>48. Ti aspetti che la tua salute peggiori?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="salute_peggiora" value="mai"><span>Mai</span></label>
            <label class="option-label"><input type="radio" name="salute_peggiora" value="raramente"><span>Raramente</span></label>
            <label class="option-label"><input type="radio" name="salute_peggiora" value="a_volte"><span>A volte</span></label>
            <label class="option-label"><input type="radio" name="salute_peggiora" value="spesso"><span>Spesso</span></label>
            <label class="option-label"><input type="radio" name="salute_peggiora" value="sempre"><span>Sempre</span></label>
          </div>
        </div>

        <div class="field">
          <label>49. Ti consideri in buona salute?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="buona_salute" value="mai"><span>Mai</span></label>
            <label class="option-label"><input type="radio" name="buona_salute" value="raramente"><span>Raramente</span></label>
            <label class="option-label"><input type="radio" name="buona_salute" value="a_volte"><span>A volte</span></label>
            <label class="option-label"><input type="radio" name="buona_salute" value="spesso"><span>Spesso</span></label>
            <label class="option-label"><input type="radio" name="buona_salute" value="sempre"><span>Sempre</span></label>
          </div>
        </div>

        <div class="field">
          <label>50. La tua salute √® paragonabile a quella delle persone della tua et√†?</label>
          <div class="grid-options">
            <label class="option-label"><input type="radio" name="salute_vs_eta" value="no"><span>No</span></label>
            <label class="option-label"><input type="radio" name="salute_vs_eta" value="non_sicuro"><span>Non ne sono sicuro</span></label>
            <label class="option-label"><input type="radio" name="salute_vs_eta" value="potrebbe_essere"><span>Potrebbe essere</span></label>
            <label class="option-label"><input type="radio" name="salute_vs_eta" value="assolutamente_si"><span>Assolutamente s√¨</span></label>
          </div>
        </div>
      </div>

      <div class="actions">
        <button type="submit" class="cta">üíæ Salva e genera report</button>
      </div>

    </form>
  </div>
  <script type="module">

    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';
    import { parse as parseYAML } from 'https://esm.sh/yaml@2';

    const SUPABASE_URL = "https://dcdccwtkblubmdolkqey.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRjZGNjd3RrYmx1Ym1kb2xrcWV5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3Mzk4MzksImV4cCI6MjA3NzMxNTgzOX0.v_iuUfnW7CBi0SP0VOzKCk_iRrGKYsEqaSoM3Exz1zo";

    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    // Carica configurazioni YAML per il questionario semplificato
    async function loadSimplifiedConfigs() {
    const [features, scoring] = await Promise.all([
        fetch('/configs/simplified/features.yaml').then(r => r.text()).then(parseYAML),
        fetch('/configs/simplified/scoring.yaml').then(r => r.text()).then(parseYAML)
    ]);
    
    return { features, scoring };
    }

    // Calcola score per domini
    function calculateDomainScores(answers, configs) {
    const { features, scoring } = configs;
    const domainScores = {};
    
    // Per ogni dominio, calcola la media pesata dei feature score
    for (const [domainId, domainConfig] of Object.entries(scoring.domains)) {
        const domainFeatures = domainConfig.features;
        let totalScore = 0;
        let totalWeight = 0;
        
        for (const [featureName, weight] of Object.entries(domainFeatures)) {
        const feature = features.features[featureName];
        if (!feature) continue;
        
        const answer = answers[featureName];
        if (!answer) continue;
        
        // Trova lo score dalla configurazione
        const option = feature.options?.[answer];
        if (option && option.score !== undefined) {
            totalScore += option.score * (weight || 1);
            totalWeight += (weight || 1);
        }
        }
        
        // Normalizza a scala 0-5
        domainScores[domainId] = totalWeight > 0 ? totalScore / totalWeight : 0;
    }
    
    return domainScores;
    }

    // Calcola indice globale
    function calculateGlobalIndex(domainScores, scoring) {
    const globalConfig = scoring.global_index;
    let weightedSum = 0;
    let totalWeight = 0;
    
    for (const [domain, weight] of Object.entries(globalConfig.domain_weights)) {
        if (domainScores[domain] !== undefined) {
        weightedSum += domainScores[domain] * weight;
        totalWeight += weight;
        }
    }
    
    const baseValue = totalWeight > 0 ? weightedSum / totalWeight : 0;
    
    // Aggiustamento et√† (opzionale)
    let adjustedValue = baseValue;
    if (globalConfig.age_moderation?.enabled) {
        // Implementa logica di moderazione et√† se necessario
        // Per ora usiamo valore base
    }
    
    return {
        value: Math.min(5, Math.max(0, adjustedValue)),
        adjusted_by_age: false
    };
    }

    // Handler submit form
    document.getElementById('simplified-questionnaire').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    // Verifica utente loggato
    const { data: { user } } = await supabase.auth.getUser();
    if (!user) {
        alert('‚ö†Ô∏è Devi effettuare il login per inviare il questionario');
        window.location.href = '/pages/login.html';
        return;
    }
    
    // Mostra loading
    const submitBtn = e.target.querySelector('button[type="submit"]');
    const originalText = submitBtn.textContent;
    submitBtn.disabled = true;
    submitBtn.textContent = '‚è≥ Elaborazione in corso...';
    
    try {
        // 1. Raccogli risposte
        const formData = new FormData(e.target);
        const answers = {};
        for (const [key, value] of formData.entries()) {
        answers[key] = value;
        }
        
        // 2. Carica configurazioni
        submitBtn.textContent = 'üìä Calcolo score...';
        const configs = await loadSimplifiedConfigs();
        
        // 3. Calcola score
        const domainScores = calculateDomainScores(answers, configs);
        const globalIndex = calculateGlobalIndex(domainScores, configs.scoring);
        
        // 4. Genera report con LLM
        submitBtn.textContent = 'ü§ñ Generazione report...';
        const reportResp = await fetch('/api/generate-corporate-report', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            userId: user.id,
            userEmail: user.email,
            answers,
            domainScores,
            globalIndex
        })
        });
        
        if (!reportResp.ok) {
        throw new Error('Errore nella generazione del report');
        }
        
        const { report } = await reportResp.json();
        
        // 5. Salva su Supabase
        submitBtn.textContent = 'üíæ Salvataggio...';
        const { error: dbError } = await supabase
        .from('corporate_reports')
        .insert({
            user_id: user.id,
            user_email: user.email,
            report_data: {
            answers,
            domainScores,
            globalIndex,
            submittedAt: new Date().toISOString()
            },
            llm_report: report,
            sent_to_admin: true
        });
        
        if (dbError) throw dbError;
        
        // 6. Successo!
        submitBtn.textContent = '‚úÖ Completato!';
        
        // Mostra messaggio di successo
        const successMsg = document.createElement('div');
        successMsg.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #28c76f, #22c55e);
        color: white;
        padding: 40px;
        border-radius: 16px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        text-align: center;
        z-index: 9999;
        max-width: 500px;
        `;
        successMsg.innerHTML = `
        <h2 style="margin:0 0 16px;font-size:2rem">‚úÖ Questionario Inviato!</h2>
        <p style="margin:0;font-size:1.1rem;opacity:0.9">
            Grazie per aver completato il questionario.<br>
            Il tuo report √® stato generato e inviato al team medico.
        </p>
        <p style="margin:16px 0 0;font-size:0.9rem;opacity:0.7">
            Verrai ricontattato a breve con i risultati.
        </p>
        `;
        document.body.appendChild(successMsg);
        
        // Redirect dopo 4 secondi
        setTimeout(() => {
        window.location.href = '/pages/login.html'; // O pagina thank-you
        }, 4000);
        
    } catch (error) {
        console.error('Error:', error);
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
        
        alert('‚ùå Errore: ' + error.message + '\n\nRiprova o contatta il supporto.');
    }
    });

    // Aggiorna progress bar durante la compilazione
    const allInputs = document.querySelectorAll('input, select, textarea');
    const progressBar = document.querySelector('.progress-bar > div');

    function updateProgress() {
    const total = allInputs.length;
    let filled = 0;
    
    allInputs.forEach(input => {
        if (input.type === 'radio' || input.type === 'checkbox') {
        const name = input.name;
        if (document.querySelector(`input[name="${name}"]:checked`)) {
            filled++;
        }
        } else if (input.value.trim()) {
        filled++;
        }
    });
    
    const percent = (filled / total) * 100;
    progressBar.style.width = percent + '%';
    }

    allInputs.forEach(input => {
    input.addEventListener('change', updateProgress);
    input.addEventListener('input', updateProgress);
    });

    updateProgress(); // Initial update
    </script>

</body>
</html>